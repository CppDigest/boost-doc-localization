# Research: Po4a + AsciiDoc in Weblate

## Findings
- Weblate has no native AsciiDoc parser; Translate Toolkit also lacks AsciiDoc support. Without an external converter, AsciiDoc cannot be ingested or regenerated by Weblate.
- po4a provides AsciiDoc extraction/merge via `po4a-gettextize` and `po4a-translate`. Recent versions support modern Asciidoctor syntax through `compat=asciidoctor`, `tablecells`, and `nowrap` options.
- Alternatives reviewed:
  - Asciidoctor-i18n: unmaintained, fails on modern syntax; not viable.
  - Pandoc HTML round-trip: loses fidelity for modern AsciiDoc (xref, fenced blocks, roles); not recommended.
- Conclusion: po4a is the practical requirement for AsciiDoc in Weblate. Without it, AsciiDoc files cannot be processed. The current AsciiDocFormat implementation depends on po4a binaries being available.

## Recommended workflow (Weblate)
1) Extraction: `po4a-gettextize -f asciidoc --option compat=asciidoctor --option tablecells -o po=OUT.pot INPUT.adoc`
2) Translation in Weblate: translate the resulting PO.
3) Merge: `po4a-translate -f asciidoc --option compat=asciidoctor --option tablecells -m TEMPLATE.adoc -p POFILE -l OUTPUT.adoc`
4) Ensure po4a is installed on the Weblate host.

## Rationale for options
- `compat=asciidoctor`: modern AsciiDoc syntax support.
- `tablecells`: finer-grained table cell translation.

## Risks / caveats
- Missing po4a binaries will break AsciiDoc processing.
- Extremely complex Asciidoctor extensions may still need manual skips or preprocessing.
- If exact line wrapping is required, verify outputs with `nowrap`.

