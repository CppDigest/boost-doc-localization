# Integration Plan for Translated Documentation

## Current State

Every library contains documentation in the `doc` folder. The Weblate project creates translated documentation files in the same folder as the original files, with a language suffix prefix (e.g., `_zh`, `_ja`).

## Integration Logic

- CI/CD Build Logic

  In `ci_boost_release.py`, after all documentation is converted to HTML and before generating the original index pages, code should be added to detect translated languages and reorganize files with language suffixes (e.g., `_zh`) by moving them to `doc/{language_code}/` and removing the suffix. Index pages should then be generated for all supported languages including the original and translated versions. Finally, all documentation including translated versions should be archived and saved to S3 as a single archive file.

- Website Display Logic

  When displaying documentation on the website, the user's preferred language should be detected using query parameters, cookies/session, Accept-Language header, optional IP geolocation, and website default settings. Based on the detected language, the URL for getting content from S3 should be changed to include the language code, such as `doc/{language_code}/html/`.

## Appendix: File structure

- Current

```
├── doc/
│   ├── index.html                       (template, generated by CI/CD)
│   ├── libs/
│   │   └── libraries.htm                (template, generated by CI/CD)
│   └── html/                            (main documentation)
├── libs/
│   └── {library}/                       (e.g., container/, filesystem/)
│       └── doc/
│           └── html/                    (library-specific documentation)
├── boost/
└── [other boost release files]
```

- After Weblate translation

```
├── doc/
│   ├── index.html                       (generated by CI/CD)
│   ├── index_zh.html                    (translated template)
│   ├── libs/
│   │   ├── libraries.htm                (generated by CI/CD)
│   │   └── libraries_zh.htm             (translated template)
│   └── html/
│       ├── [original documentation files]
│       └── [files with _zh suffix]
├── libs/
│   └── {library}/                       (e.g., container/, filesystem/)
│       └── doc/
│           └── html/
│               ├── [original library docs]
│               └── [files with _zh suffix]
├── boost/
└── [other boost release files]
```

- After reorganization (final structure)

```
├── doc/
│   ├── index.html                       (original, generated by CI/CD)
│   ├── libs/
│   │   └── libraries.htm                (original, generated by CI/CD)
│   ├── html/                            (original main docs)
│   └── {language_code}/                 (e.g., zh/)
│       ├── index.html                   (translated, generated by CI/CD)
│       ├── libs/
│       │   └── libraries.htm            (translated, generated by CI/CD)
│       └── html/                        (translated main docs)
├── libs/
│   └── {library}/                       (e.g., container/, filesystem/)
│       └── doc/
│           ├── html/                    (original library docs)
│           └── {language_code}/         (e.g., zh/)
│               └── html/                (translated library docs)
├── boost/
└── [other boost release files]
```

Note: The reorganization process moves `_zh` files from both the root `doc/` folder and from each library's `libs/{library}/doc/` folder to their respective language-specific subdirectories, maintaining the same relative structure.
